(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{723:function(s,e,t){"use strict";t.r(e);var a=t(81),r=Object(a.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"redis之hyperloglog"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis之hyperloglog"}},[s._v("#")]),s._v(" Redis之HyperLogLog")]),s._v(" "),e("blockquote",[e("p",[s._v("HyperLogLog means 超级日志")])]),s._v(" "),e("p",[s._v("Redis 在 2.8.9 版本添加了 HyperLogLog 结构。")]),s._v(" "),e("p",[s._v("Redis HyperLogLog 是用来做基数统计的算法，HyperLogLog 的优点是，在输入元素的数量或者体积非常非常大时，计算基数所需的空间总是固定 的、并且是很小的。")]),s._v(" "),e("p",[s._v("在 Redis 里面，每个 HyperLogLog 键只需要花费 12 KB 内存，就可以计算接近 2^64 个不同元素的基 数。这和计算基数时，元素越多耗费内存就越多的集合形成鲜明对比。")]),s._v(" "),e("p",[s._v("但是，因为 HyperLogLog 只会根据输入元素来计算基数，而不会储存输入元素本身，所以 HyperLogLog 不能像集合那样，返回输入的各个元素。")]),s._v(" "),e("h2",{attrs:{id:"什么是基数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是基数"}},[s._v("#")]),s._v(" 什么是基数?")]),s._v(" "),e("p",[s._v("比如数据集 {1, 3, 5, 7, 5, 7, 8}， 那么这个数据集的基数集为 {1, 3, 5 ,7, 8}, 基数(不重复元素)为5。 基数估计就是在误差可接受的范围内，快速计算基数。")]),s._v(" "),e("h2",{attrs:{id:"使用方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用方法"}},[s._v("#")]),s._v(" 使用方法")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" PFADD key "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" PFADD key "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" PFCOUNT key  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全部数量")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" PFMERGE key key2 key3 "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 把key2 key3的数量merge到key中")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])])])}),[],!1,null,null,null);e.default=r.exports}}]);